{% extends 'base.html.twig' %}

{% block title %}Dashboard{% endblock %}

{% block body %}
<div class="pr-12 bg-neutral-100 max-md:pr-5">
  <div class="flex gap-5 max-md:flex-col max-md:gap-0">
    <aside class="flex flex-col w-[22%] max-md:ml-0 max-md:w-full">
      <nav class="flex flex-col grow items-start py-9 pl-3.5 mx-auto w-full text-2xl text-white whitespace-nowrap bg-slate-900 max-md:mt-10">
        <h1 class="self-center text-3xl font-semibold">GarageGenius</h1>
        <h2 class="mt-16 ml-6 max-md:mt-10 max-md:ml-2.5">Menu</h2>
        <a href="/Dashboard" class="flex gap-3 self-stretch px-6 py-3 mt-10 font-semibold rounded-none bg-stone-300 text-slate-900 max-md:px-5">
          <img loading="lazy" src="images/dashboard_blue.svg" class="shrink-0 aspect-square w-[35px]" alt="" />
          <span class="flex-auto my-auto">Dashboard</span>
        </a>
        <a href="/devis" class="flex gap-3.5 mt-5 ml-5 max-md:ml-2.5">
          <img loading="lazy" src="images/facture_white.svg" class="shrink-0 aspect-square w-[35px]" alt="" />
          <span class="my-auto">Devis</span>
        </a>
        <a href="/facture" class="flex gap-3.5 mt-7 ml-5 max-md:ml-2.5">
          <img loading="lazy" src="images/facture_white.svg" class="shrink-0 aspect-square w-[35px]" alt="" />
          <span class="flex-auto my-auto">Factures</span>
        </a>
        <a href="/produit" class="flex gap-2.5 mt-9 ml-6 max-md:ml-2.5">
          <img loading="lazy" src="images/produits_white.svg" class="shrink-0 aspect-square w-[37px]" alt="" />
          <span class="my-auto">Prix</span>
        </a>
        <a href="/profile" class="flex gap-4 mt-8 ml-7 max-md:ml-2.5">
          <img loading="lazy" src="images/users_white.svg" class="shrink-0 aspect-square w-[27px]" alt="" />
          <span class="flex-auto my-auto">Utilisateurs</span>
        </a>
        <a href="/profile/edit" class="flex gap-4 mt-10 ml-7 max-md:ml-2.5">
          <img loading="lazy" src="images/reglages_white.svg" class="shrink-0 aspect-square w-[27px]" alt="" />
          <span class="flex-auto">Réglages</span>
        </a>
        <a href="/deconnexion" class="flex gap-3 ml-6 mt-[655px] max-md:mt-10 max-md:ml-2.5">
          <img loading="lazy" src="images/quit.svg" class="shrink-0 w-8 aspect-square" alt="" />
          <span class="flex-auto my-auto">Déconnexion</span>
        </a>
      </nav>
    </aside>
    <main class="flex flex-col ml-5 w-[78%] max-md:ml-0 max-md:w-full">
      <section class="flex flex-col self-stretch my-auto max-md:mt-10 max-md:max-w-full">
        <header class="flex gap-2.5 self-start text-3xl font-semibold whitespace-nowrap text-slate-900">
          <img loading="lazy" src="images/dashboard_blue.svg" class="shrink-0 w-12 aspect-square" alt="" />
          <h2 class="flex-auto my-auto">Dashboard</h2>
        </header>
        <div class="mt-14 max-md:mt-10 max-md:max-w-full">
          <div class="flex gap-5 max-md:flex-col max-md:gap-0">
            <article class="flex flex-col w-3/12 max-md:ml-0 max-md:w-full">
              <div class="flex flex-col grow px-6 py-11 w-full text-2xl font-semibold bg-white rounded-3xl shadow-sm max-md:px-5 max-md:mt-9">
                <h3 class="text-slate-900">Factures émises</h3>
                
                <p class="self-center mt-8 text-stone-300">{{ factureCount }}</p>
               
              </div>
            </article>
            <article class="flex flex-col ml-5 w-3/12 max-md:ml-0 max-md:w-full">
              <div class="flex flex-col grow px-10 py-11 w-full text-2xl font-semibold bg-white rounded-3xl shadow-sm max-md:px-5 max-md:mt-9">
                <h3 class="text-slate-900">Devis générés</h3>
                <p class="self-center mt-7 text-stone-300">{{ factureCount }}</p>
              </div>
            </article>
            <article class="flex flex-col ml-5 w-3/12 max-md:ml-0 max-md:w-full">
              <div class="flex flex-col grow px-4 py-11 w-full text-2xl font-semibold bg-white rounded-3xl shadow-sm max-md:mt-9">
                <h3 class="text-slate-900">Total des revenus</h3>
                <p class="self-center mt-8 text-stone-300">{{ totalfactureAmount }}€</p>
              </div>
            </article>
            <article class="flex flex-col ml-5 w-3/12 max-md:ml-0 max-md:w-full">
              <div class="flex flex-col grow px-20 py-11 w-full text-2xl font-semibold whitespace-nowrap bg-white rounded-3xl shadow-sm max-md:px-5 max-md:mt-9">
                <h3 class="text-slate-900 max-md:mx-1">Clients</h3>
                <p class="self-center mt-8 text-stone-300">{{ clientCount }}</p>
              </div>
            </article>
          </div>
        </div>
        <div class="mt-9 max-md:max-w-full">
          <div class="flex gap-5 max-md:flex-col max-md:gap-0">
            <section class="flex flex-col w-6/12 max-md:ml-0 max-md:w-full">
              <div class="flex flex-col items-start pt-6 pr-20 pb-20 pl-6 w-full text-sm bg-white rounded-3xl shadow-sm text-slate-900 max-md:px-5 max-md:mt-9 max-md:max-w-full">
                <h3 class="text-2xl font-semibold">Activités recentes</h3>
                {% for facture in factureList %}
                <ul class="mt-6 list-none">
                  <li class="mt-5">Nouvelle facture créée pour {{ facture.nomClient }} {{ facture.totalPrix }}€</li>
                </ul>
                {% endfor %}
              </div>
            </section>
            <section class="flex flex-col ml-5 w-6/12 max-md:ml-0 max-md:w-full">
              <div class="flex flex-col grow items-start pt-6 pr-20 pb-20 pl-6 w-full text-sm bg-white rounded-3xl shadow-sm text-slate-900 max-md:px-5 max-md:mt-9 max-md:max-w-full">
                <h3 class="text-2xl font-semibold">Activités a réaliser aujourd'hui</h3>
                {% for devis in devisList %}
                <ul class="mt-5 list-none">
                  <li class="mt-5">Nouvelle devis créée pour {{ devis.nomClient}} {{ devis.totalPrix }}€</li>
                </ul>
                {% endfor %}
              </div>
            </section>
          </div>
        </div>
        <section class="flex flex-col px-6 pt-6 pb-14 mt-9 bg-white rounded-3xl shadow-sm max-md:px-5 max-md:max-w-full">
          <h3 class="text-2xl font-semibold text-slate-900 max-md:max-w-full">Derniers devis</h3>
          <table class="mt-10 text-sm text-black bg-white rounded border border-solid border-zinc-400 max-md:max-w-full">
            <thead>
              <tr class="font-semibold whitespace-nowrap bg-white bg-opacity-0 text-slate-900">
                <th class="py-px text-xs leading-4 text-center text-black border-t border-l border-solid bg-black bg-opacity-10 border-zinc-400">Numéro</th>
                <th class="text-center border-t border-l border-solid bg-black bg-opacity-10 border-zinc-400">Client</th>
                <th class="text-center border-t border-l border-solid bg-black bg-opacity-10 border-zinc-400">Montant</th>
                <th class="text-center border-t border-l border-solid bg-black bg-opacity-10 border-zinc-400">Date</th>
                <th class="border-t border-l border-solid bg-black bg-opacity-10 border-zinc-400">Statut</th>
              </tr>
            </thead>
            <tbody>
              
             
              {% for facture in factureList %}
              <tr class="bg-white bg-opacity-0">
                <td class="whitespace-nowrap border-t border-l border-solid bg-white bg-opacity-0 border-zinc-400 px-3 py-2.5">{{ facture.id }}</td>
                <td class="border-t border-l border-solid bg-white bg-opacity-0 border-zinc-400 px-3 py-2.5">{{ facture.nomClient }}</td>
                <td class="whitespace-nowrap border-t border-l border-solid bg-white bg-opacity-0 border-zinc-400 px-3 py-2.5">{{ facture.totalPrix }}€</td>
                <td class="whitespace-nowrap border-t border-l border-solid bg-white bg-opacity-0 border-zinc-400 px-3 py-2.5">{{ facture.date|date('d/m/Y') }}</td>
                <td class="whitespace-nowrap border-t border-l border-solid bg-white bg-opacity-0 border-zinc-400 px-3 py-2.5">{{ facture.statut }}</td>
              </tr>
              {% endfor %}
            </tbody>
          </table>
        </section>
        <section class="flex flex-col px-6 pt-6 pb-14 mt-9 bg-white rounded-3xl shadow-sm max-md:px-5 max-md:max-w-full">
          <h3 class="text-2xl font-semibold text-slate-900 max-md:max-w-full">Dernières factures</h3>
          <table class="mt-9 text-sm text-black bg-white rounded border border-solid border-zinc-400 max-md:max-w-full">
            <thead>
              
              <tr class="font-semibold whitespace-nowrap bg-white bg-opacity-0 text-slate-900">
                <th class="py-px text-xs leading-4 text-center text-black border-t border-l border-solid bg-black bg-opacity-10 border-zinc-400">Numéro</th>
                <th class="text-center border-t border-l border-solid bg-black bg-opacity-10 border-zinc-400">Client</th>
                <th class="text-center border-t border-l border-solid bg-black bg-opacity-10 border-zinc-400">Montant</th>
                <th class="text-center border-t border-l border-solid bg-black bg-opacity-10 border-zinc-400">Date</th>
                <th class="border-t border-l border-solid bg-black bg-opacity-10 border-zinc-400">Statut</th>
              </tr>
              
            </thead>
            <tbody>
              {% for devis in devisList %}
              <tr class="bg-white bg-opacity-0">
                <td class="whitespace-nowrap border-t border-l border-solid bg-white bg-opacity-0 border-zinc-400 px-3 py-2.5">{{ devis.id }}</td>
                <td class="border-t border-l border-solid bg-white bg-opacity-0 border-zinc-400 px-3 py-2.5">{{ devis.nomClient }}</td>
                <td class="whitespace-nowrap border-t border-l border-solid bg-white bg-opacity-0 border-zinc-400 px-3 py-2.5">{{ devis.totalPrix }}€</td>
                <td class="whitespace-nowrap border-t border-l border-solid bg-white bg-opacity-0 border-zinc-400 px-3 py-2.5">{{ devis.date|date('d/m/Y') }}</td>
                <td class="whitespace-nowrap border-t border-l border-solid bg-white bg-opacity-0 border-zinc-400 px-3 py-2.5">{{ devis.statut }}</td>
              </tr>
              {% endfor %}
              
            </tbody>
          </table>
        </section>
      </section>
    </main>
  </div>
</div>
{% endblock %}
